{% extends 'layout.html' %} {% block head %}
<title>EXODUS GYM - Home</title>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
/>
{% endblock %} {% block body %}
<header class="main-header">
  <div class="container header-content">
    <a href="/" class="logo-text">EXODUS GYM</a>

    <nav class="main-nav">
      <ul>
        <li><a href="/" class="home-link active">Home</a></li>
        <li>
          <a href="/membership" class="membership-link">Membership</a>
        </li>
        <li><a href="/our-clubs" class="clubs-link">Our Clubs</a></li>
      </ul>
    </nav>

    {% if session.member %}
    <div class="dropdown">
      <a href="#" class="dropdown-toggle" id="userDropdown">
        {{ session.member.name }}
        <i class="bi bi-caret-down-fill"></i>
      </a>
      <ul class="dropdown-menu">
        <li>
          <a
            href="{{ url_for('member_home', name=session.member.name, package=session.member.package, email=session.member.email, phone=session.member.phone) }}"
            >Profile</a
          >
        </li>
        <li><a href="{{ url_for('logout') }}">Logout</a></li>
      </ul>
    </div>
    {% else %}
    <a href="/join" class="btn-join">Join Now</a>
    {% endif %}
  </div>
</header>

<section class="hero-section">
  <div class="slider-container">
    <div
      class="slide active"
      style="
        background-image: url('{{ url_for('static', filename='gedung.webp') }}');
      "
    ></div>
    <div
      class="slide"
      style="
        background-image: url('{{ url_for('static', filename='boxing.jpg') }}');
      "
    ></div>
    <div
      class="slide"
      style="
        background-image: url('{{ url_for('static', filename='renang.jpg') }}');
      "
    ></div>
  </div>

  <div class="hero-text-content">
    <h1 class="hero-title text-light">ALL-IN GYM<br />EXPERIENCE</h1>
    <p
      class="hero-subtitle text-light"
      style="font-size: 1.1rem; font-weight: 400; margin-bottom: 25px"
    >
      Not Just a Gym — It's Your Lifestyle Upgrade
    </p>
    <a href="/join" class="btn-register">Register Now</a>
  </div>

  <div class="slider-nav">
    <span class="prev">&#10094;</span> <span class="next">&#10095;</span>
  </div>

  <div class="slider-dots">
    <span class="dot active"></span>
    <span class="dot"></span>
    <span class="dot"></span>
  </div>
</section>

<main class="page-content">
  <div class="container">
    <section class="guarantee-section">
      <div class="guarantee-text">
        <h2>EXODUS MONEY BACK<br />GUARANTEE<br />PROGRAM</h2>
      </div>
      <div class="guarantee-details">
        <h3>We've Got You Covered.</h3>
        <p>
          In the unlikely event that your home club permanently closes, EXODUS
          ensures a full refund of your unused membership period and Personal
          Training sessions — because your trust matters most.
        </p>
        <a href="/join" class="btn-join-guarantee">Join Now</a>
      </div>
    </section>

    <section class="why-ftl-section">
      <div class="container">
        <h2 class="why-ftl-title">WHY EXODUS?</h2>
        <p class="why-ftl-subtitle">
          EXODUS offers complete facilities, professional personal trainers, and
          flexible memberships designed to fit your needs.
        </p>

        <div class="feature-layout">
          <div class="feature-list">
            <div
              class="feature-item active"
              data-image="{{ url_for('static', filename='club_access.jpg') }}"
            >
              Unlimited 24/7 access to all EXODUS clubs nationwide
            </div>
            <div
              class="feature-item"
              data-image="{{ url_for('static', filename='group_class.jpg') }}"
            >
              6000+ Group Exercise Classes every month
            </div>
            <div
              class="feature-item"
              data-image="{{ url_for('static', filename='wellness.jpg') }}"
            >
              Wellness facilities: Sauna, Steam, Jacuzzi & Onsen
            </div>
            <div
              class="feature-item"
              data-image="{{ url_for('static', filename='pilates.jpg') }}"
            >
              Indonesia's largest Group Pilates program
            </div>
            <div
              class="feature-item"
              data-image="{{ url_for('static', filename='guarantee_feat.jpg') }}"
            >
              EXODUS Money-Back Guarantee Program
            </div>
          </div>

          <div class="feature-image">
            <img
              id="featureImage"
              src="{{ url_for('static', filename='club_access.jpg') }}"
              alt="EXODUS Feature Highlight"
            />
          </div>
        </div>
      </div>
    </section>
  </div>
</main>

<section class="trainers-section">
  <div class="container">
    <div class="trainer-header-content">
      <div class="trainer-header-left">
        <h2 class="trainers-title">Meet our Certified Personal Trainers</h2>
        <ul class="trainer-program-list">
          <li>Weight & Fat Loss</li>
          <li>Build Muscle</li>
          <li>Weight Gain</li>
          <li>Strength and Power</li>
          <li>Body Shaping</li>
          <li>Posturing</li>
          <li>Muay Thai Program</li>
          <li>Boxing</li>
          <li>Rehabilitation</li>
          <li>Mobility and Balance</li>
          <li>High Intensity Interval Training (HIIT)</li>
          <li>Weight Management</li>
        </ul>
        <p class="more-programs">And more customized programs.</p>
      </div>
      <div class="trainer-header-right">
        <p class="trainer-intro">
          Every session is guided by trainers with trusted national and
          international certifications.
        </p>
        <div class="cert-logos">
          <img
            src="{{ url_for('static', filename='issa_logo.png') }}"
            alt="ISSA Certification"
            class="cert-logo"
          />
          <img
            src="{{ url_for('static', filename='nasm_logo.png') }}"
            alt="NASM Certification"
            class="cert-logo"
          />
        </div>
        <a href="/join" class="btn-join trainer-join-btn">Join Now</a>
      </div>
    </div>

    <div class="trainer-slider-wrapper">
      <div class="trainer-cards-grid">
        <div class="trainer-card" data-index="0">
          <img
            src="{{ url_for('static', filename='trainer_zaenab.jpg') }}"
            alt="Zaenab - Personal Trainer"
            class="trainer-photo"
          />
          <div class="trainer-info">
            <h3 class="trainer-name">Zaenab</h3>
            <p class="trainer-role">Personal Trainer</p>
          </div>
        </div>
        <div class="trainer-card" data-index="1">
          <img
            src="{{ url_for('static', filename='trainer_jevery.jpg') }}"
            alt="Jevery - Personal Trainer"
            class="trainer-photo"
          />
          <div class="trainer-info">
            <h3 class="trainer-name">Jevery</h3>
            <p class="trainer-role">Personal Trainer</p>
          </div>
        </div>
        <div class="trainer-card" data-index="2">
          <img
            src="{{ url_for('static', filename='trainer_rival.jpg') }}"
            alt="Rival - Personal Trainer"
            class="trainer-photo"
          />
          <div class="trainer-info">
            <h3 class="trainer-name">Rival</h3>
            <p class="trainer-role">Personal Trainer</p>
          </div>
        </div>
        <div class="trainer-card" data-index="3">
          <img
            src="{{ url_for('static', filename='trainer_rani.jpg') }}"
            alt="Rani - Personal Trainer"
            class="trainer-photo"
          />
          <div class="trainer-info">
            <h3 class="trainer-name">Rani</h3>
            <p class="trainer-role">Personal Trainer</p>
          </div>
        </div>
        <div class="trainer-card" data-index="4">
          <img
            src="{{ url_for('static', filename='trainer_joko.jpg') }}"
            alt="Joko - Master Trainer"
            class="trainer-photo"
          />
          <div class="trainer-info">
            <h3 class="trainer-name">Joko</h3>
            <p class="trainer-role">Master Trainer</p>
          </div>
        </div>
        <div class="trainer-card" data-index="5">
          <img
            src="{{ url_for('static', filename='trainer_sinta.jpg') }}"
            alt="Sinta - Personal Trainer"
            class="trainer-photo"
          />
          <div class="trainer-info">
            <h3 class="trainer-name">Sinta</h3>
            <p class="trainer-role">Personal Trainer</p>
          </div>
        </div>
        <div class="trainer-card" data-index="6">
          <img
            src="{{ url_for('static', filename='trainer_bima.jpg') }}"
            alt="Bima - Strength Coach"
            class="trainer-photo"
          />
          <div class="trainer-info">
            <h3 class="trainer-name">Bima</h3>
            <p class="trainer-role">Strength Coach</p>
          </div>
        </div>
        <div class="trainer-card" data-index="7">
          <img
            src="{{ url_for('static', filename='trainer_fitri.jpg') }}"
            alt="Fitri - Group Class Instructor"
            class="trainer-photo"
          />
          <div class="trainer-info">
            <h3 class="trainer-name">Fitri</h3>
            <p class="trainer-role">Group Class Instructor</p>
          </div>
        </div>
      </div>

      <div class="trainer-slider-nav">
        <span class="trainer-prev">&#10094;</span>
        <span class="trainer-next">&#10095;</span>
      </div>
    </div>
  </div>
</section>

<div id="trainerModal" class="modal">
  <span class="close-btn">&times;</span>
  <img class="modal-content" id="modalImage" />
  <div id="modalCaption"></div>
</div>

<main class="page-content">
  <div class="container">
    <h2>Transformasi Kebugaran Dimulai Di Sini</h2>
    <p>Telusuri fitur-fitur utama kami di bawah.</p>
  </div>
</main>

<footer
  style="background: #222; color: white; text-align: center; padding: 15px 0"
>
  <div class="container">
    <p>&copy; 2025 EXODUS GYM. All rights reserved.</p>
  </div>
</footer>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // --- Hero Slider Logic (Kode Asli Anda) ---
    let slides = document.querySelectorAll(".slide");
    let dots = document.querySelectorAll(".dot");
    let currentIndex = 0;
    let interval;

    function showSlide(index) {
      slides.forEach((slide, i) => {
        slide.classList.toggle("active", i === index);
        dots[i].classList.toggle("active", i === index);
      });
      currentIndex = index;
    }

    function nextSlide() {
      let newIndex = (currentIndex + 1) % slides.length;
      showSlide(newIndex);
    }

    function prevSlide() {
      let newIndex = (currentIndex - 1 + slides.length) % slides.length;
      showSlide(newIndex);
    }

    function startAutoSlide() {
      interval = setInterval(nextSlide, 4000); // auto slide every 4 seconds
    }

    function stopAutoSlide() {
      clearInterval(interval);
    }

    // Slider Events
    document.querySelector(".next").addEventListener("click", () => {
      stopAutoSlide();
      nextSlide();
      startAutoSlide();
    });

    document.querySelector(".prev").addEventListener("click", () => {
      stopAutoSlide();
      prevSlide();
      startAutoSlide();
    });

    dots.forEach((dot, i) => {
      dot.addEventListener("click", () => {
        stopAutoSlide();
        showSlide(i);
        startAutoSlide();
      });
    });

    // Start slider
    showSlide(currentIndex);
    startAutoSlide();

    // --- Dropdown Logic (for logged-in user) ---
    const userDropdown = document.getElementById("userDropdown");
    if (userDropdown) {
      userDropdown.addEventListener("click", function (e) {
        e.preventDefault();
        this.parentElement.classList.toggle("active");
      });

      // Close dropdown if user clicks outside
      document.addEventListener("click", function (e) {
        const dropdown = document.querySelector(".dropdown");
        if (dropdown && !dropdown.contains(e.target)) {
          dropdown.classList.remove("active");
        }
      });
    }

    // ====================================================================
    // --- TRAINER SLIDER & ZOOM LOGIC (DENGAN TOUCH/SWIPE) ---
    // ====================================================================
    const trainerWrapper = document.querySelector(".trainer-slider-wrapper");
    const trainerGrid = document.querySelector(".trainer-cards-grid");
    const trainerCards = document.querySelectorAll(".trainer-card");
    const trainerPrev = document.querySelector(".trainer-prev");
    const trainerNext = document.querySelector(".trainer-next");

    const CARD_WIDTH = 310;
    const TOTAL_CARDS = trainerCards.length;
    let trainerIndex = 0;
    let cardsPerView = 0;

    let touchStartX = 0;
    let touchEndX = 0;
    const SWIPE_THRESHOLD = 50;

    function updateCardsPerView() {
      cardsPerView = Math.floor(trainerWrapper.offsetWidth / CARD_WIDTH);
      if (cardsPerView <= 0) cardsPerView = 1;

      if (trainerIndex > TOTAL_CARDS - cardsPerView) {
        trainerIndex = TOTAL_CARDS - cardsPerView;
        if (trainerIndex < 0) trainerIndex = 0;
      }
      updateTrainerSlider();
    }

    function updateTrainerSlider() {
      const offset = -(trainerIndex * CARD_WIDTH);
      trainerGrid.style.transform = `translateX(${offset}px)`;

      trainerPrev.style.opacity = trainerIndex > 0 ? "1" : "0.5";
      trainerNext.style.opacity =
        trainerIndex < TOTAL_CARDS - cardsPerView ? "1" : "0.5";
    }

    trainerNext.addEventListener("click", () => {
      if (trainerIndex < TOTAL_CARDS - cardsPerView) {
        trainerIndex++;
      } else {
        trainerIndex = 0;
      }
      updateTrainerSlider();
    });

    trainerPrev.addEventListener("click", () => {
      if (trainerIndex > 0) {
        trainerIndex--;
      } else {
        trainerIndex = TOTAL_CARDS - cardsPerView;
      }
      updateTrainerSlider();
    });

    // --- Logika Sentuhan/Swipe ---
    trainerWrapper.addEventListener("touchstart", (e) => {
      touchStartX = e.touches[0].clientX;
      trainerGrid.style.transition = "none";
    });

    trainerWrapper.addEventListener("touchmove", (e) => {
      touchEndX = e.touches[0].clientX;
      const currentTranslate = -trainerIndex * CARD_WIDTH;
      const dragDistance = touchEndX - touchStartX;

      trainerGrid.style.transform = `translateX(${
        currentTranslate + dragDistance
      }px)`;
    });

    trainerWrapper.addEventListener("touchend", () => {
      trainerGrid.style.transition = "transform 0.5s ease-in-out";

      const dragDistance = touchEndX - touchStartX;

      if (dragDistance > SWIPE_THRESHOLD && trainerIndex > 0) {
        trainerIndex--;
      } else if (
        dragDistance < -SWIPE_THRESHOLD &&
        trainerIndex < TOTAL_CARDS - cardsPerView
      ) {
        trainerIndex++;
      }

      updateTrainerSlider();

      touchStartX = 0;
      touchEndX = 0;
    });

    // --- Trainer Zoom (Modal) Logic ---
    const modal = document.getElementById("trainerModal");
    const modalImg = document.getElementById("modalImage");
    const captionText = document.getElementById("modalCaption");
    const closeBtn = document.querySelector(".close-btn");

    trainerCards.forEach((card) => {
      card.addEventListener("click", function () {
        if (Math.abs(touchEndX - touchStartX) < 10) {
          modal.style.display = "block";

          const imgElement = this.querySelector(".trainer-photo");
          const name = this.querySelector(".trainer-name").textContent;
          const role = this.querySelector(".trainer-role").textContent;

          modalImg.src = imgElement.src;
          captionText.innerHTML = `<strong>${name}</strong> - ${role}<br>Klik di luar gambar atau 'x' untuk menutup.`;
        }
      });
    });

    // Tutup modal ketika tombol 'x' diklik
    closeBtn.onclick = function () {
      modal.style.display = "none";
    };

    // Tutup modal ketika area gelap (di luar gambar) diklik
    modal.onclick = function (event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    };

    // Update slider saat halaman dimuat dan diubah ukurannya
    updateCardsPerView();
    window.addEventListener("resize", updateCardsPerView);

    // ====================================================================
    // --- WHY EXODUS? Feature Tab Logic (BARU) ---
    // ====================================================================
    const featureItems = document.querySelectorAll(".feature-item");
    const featureImage = document.getElementById("featureImage");

    featureItems.forEach((item) => {
      item.addEventListener("click", function () {
        // 1. Hapus kelas 'active' dari semua item
        featureItems.forEach((i) => i.classList.remove("active"));

        // 2. Tambahkan kelas 'active' pada item yang baru diklik
        this.classList.add("active");

        // 3. Ambil path gambar dari atribut data-image
        const newImageSrc = this.getAttribute("data-image");

        // 4. Perbarui sumber gambar (dengan efek transisi halus)
        // Tambahkan kelas 'fade-out' untuk transisi
        featureImage.classList.add("fade-out");

        // Atur waktu tunggu sebentar (misalnya 200ms) untuk transisi opacity
        setTimeout(() => {
          featureImage.src = newImageSrc;
          // Hapus kelas 'fade-out' untuk memicu transisi fade-in
          featureImage.classList.remove("fade-out");
        }, 200);
      });
    });
  });
</script>

{% endblock %}
